<html>
<head><script type="text/javascript" src="functions.js"></script></head>
<link rel="stylesheet" href="docstyles.css" />
<body bgcolor="#FFE394">
<br /><br />
<center>
<div class="tutorial">
	<table class="outer" border="0" cellspacing="0" cellpadding="0" width="440" bgcolor="#000000">
		<tr>
			<td>
				<table width="100%" border="0" cellspacing="1" cellpadding="8">
					<tr>
						<td class="sectionHeader"><script type="text/javascript">
document.write(getTutorialTitle());
</script></td>
					</tr>
					<tr>
						<td class="subsectionHeader"><center>
							<script type="text/javascript">
								document.write(generateMenu(4));
							</script>
						</center></td>
					</tr>
					<tr>
						<td class="subsectionHeader">Instantiating a DOMIT! Document</td>
					</tr>
					<tr>
						<td class="regular"><p>In <b>DOMIT!</b>,  a DOM Document is represented by the <b>DOMIT_Document</b> class.</p>
						
						<p>Below is an example of the cd collection XML string from the previous page being instantiated as a <b>DOMIT_Document</b>. 
						<ul>
							<p><li>First, the <b>DOMIT_Document</b> is created and assigned to the variable <span class="code">$cdCollection</span>.</li></p>
							<p><li>Then, an XML string is passed to the <span class="code">parseXML</span> method.<br /></li></p>
						</ul>
						</p>

<p>
<pre class="code">

$cdCollectionString = &quot;&lt;cdlibrary&gt;&lt;cd id=\&quot;0001\&quot;&gt;
	&lt;name&gt;Robbie Fulks&lt;/name&gt;
	&lt;title&gt;Couples in Trouble&lt;/title&gt;&lt;/cd&gt;
	&lt;cd id=\&quot;0002\&quot;&gt;&lt;name&gt;Richard Thompson&lt;/name&gt;
	&lt;title&gt;Mock Tudor&lt;/title&gt;&lt;/cd&gt;&lt;cd id=\&quot;0003\&quot;&gt;
	&lt;name&gt;Keller Williams&lt;/name&gt;
	&lt;title&gt;Laugh&lt;/title&gt;&lt;/cd&gt;&lt;/cdlibrary&gt;&quot;;

$cdCollection =&amp; new DOMIT_Document();
$success = $cdCollection-&gt;parseXML($cdCollectionString, true);

</pre></p>

<p><span class="code">parseXML</span> returns <b>true</b> if the parsing is successful.</p>

<p><b>NOTE:</b> You instantiate a <b>DOMIT! Lite</b> document like this:</p>

<p><span class="code">$cdCollection =&amp; new DOMIT_Lite_Document()</span>.</p>

<p><b><u>Expat vs. SAXY</u></b></p>

<p>Note that the second parameter to the <span class="code">parseXML</span> method should be set to <b>true</b> if you wish to use the <b>SAXY</b> parser and <b>false</b> if you wish to use the <b>Expat</b> browser. The default value is true.</p>

<p>However, if you specify that <b>Expat</b> should be used, and <b>Expat</b> is unavailable, DOMIT! will invoke the <b>SAXY</b> parser in its place.</p>

<p><b><u>parsedBy</u></b></p>

<p>You can query your document using the <span class="code">parsedBy</span> method to find out which parser was used to generate the document.</p>

<p>
<pre class="code">
$parserName = $cdCollection->parsedBy;
</pre></p>

<p><b><u>loadXML</u></b></p>

<p>You can also use the <span class="code">loadXML</span> method to load an XML string from a text file.</p>

<p>
<pre class="code">
$cdCollection =&amp; new DOMIT_Document();
$success = $cdCollection-&gt;loadXML("/xml/cdcollection.xml");
</pre></p>

<p><b><u>setConnection</u></b></p>

<p>The <span class="code">setConnection</span> method allows you to manually set the parameters of the http connection when a file is accessed remotely.</p>

<p>For example:</p>

<p>
<pre class="code">
$xmldoc-&gt;setConnection('http://www.engageinteractive.com', '80');
</pre></p>

<p><b><u>setAuthorization</u></b></p>

<p>If basic HTTP authorization is required for the connection, the <span class="code">setAuthorization</span> method allows you
to specify a user name and password:</p>

<p>
<pre class="code">
$xmldoc-&gt;setAuthorization('johndoe', 'xyzzy');
</pre></p>

<p><b><u>setProxyConnection</u></b></p>

<p>The <span class="code">setProxyConnection</span> method allows you to manually set the parameters of a proxy http connection:</p>

<p>
<pre class="code">
$xmldoc-&gt;setProxyConnection('http://www.myProxy.com', '8080');
</pre></p>

<p><b><u>setProxyAuthorization</u></b></p>

<p>If basic HTTP authorization is required for the proxy connection, the <span class="code">setProxyAuthorization</span> method allows you
to specify a user name and password:</p>

<p>
<pre class="code">
$xmldoc-&gt;setProxyAuthorization('johndoe', 'xyzzy');
</pre></p>


<p><b><u>getErrorCode and getErrorString</u></b></p>

<p>Both the  <span class="code">parseXML</span> and <span class="code">loadXML</span> methodsreturn <b>false</b> if an error is
encountered while parsing. You can find out more about the error with the <span class="code">getErrorCode</span> and <span class="code">getErrorString</span>methods.</p>

<p><span class="code">getErrorCode</span> returns an integer designating the number of the error, while <span class="code">getErrorString</span> returns a textual description of the error code:</p>

<p>
<pre class="code">
$success = $cdCollection-&gt;loadXML("/xml/cdcollection.xml");

if (!$success) {
	echo "Error number " . $cdCollection-&gt;getErrorCode() . ": " . 
				$cdCollection-&gt;getErrorString();
}
</pre></p>



<p><b><u>resolveErrors</u></b></p>

<p>If you call the <span class="code">resolveErrors</span> method just before parsing, <b>DOMIT!</b> will attempt to detect and
repair any invalid XML.</p>

<p>
<pre class="code">
$cdCollection =&amp; new DOMIT_Document();
$cdCollection-&gt;resolveErrors(true);
$success = $cdCollection-&gt;loadXML("/xml/cdcollection.xml");
</pre></p>


<p><b><u>parseXML_utf8 and loadXML_utf8</u></b></p>

<p>If you are dealing with non-ASCII characters, you can use the <span class="code">loadXML_utf8</span> 
and <span class="code">parseXML_utf8</span> methods to encode your text in UTF-8 format.</p>

<p>There are several preconditions to using these methods:

	<ul>
		<li>Your original string must use <b>ISO-8859-1 encoding</b>. Any other encoding will likely produce corrupted text.</li>
		<li>Expat must be included in your PHP distribution, since these functions use Expat's <span class="code">UTF8_encode</span> function.</li>
	</ul>
</p>

<p><i>For these reasons, it is no longer recommended that these methods be used. Refer instead to
the <span class="code">appendEntityTranslationTable</span> method.</i></p>

<p>If you still want to use these methods, here is an example:</p>

<p>
<pre class="code">
$cdCollection =&amp; new DOMIT_Document();
$success = $cdCollection-&gt;loadXML_utf8("/xml/cdcollection.xml");
</pre></p>

<p><b><u>printUTF8Header</u></b></p>

<p>Note that before your browser can correctly display UTF-8 encoded text, 
you must inform it by calling the method <span class="code">DOMIT_Utilities::printUTF8Header()</span>. 
This must be done before any output is sent to the browser.</p>

				</td>
					</tr>
					<tr>
						<td class="subsectionHeader"><center>
							<script type="text/javascript">
								document.write(generateMenu(4));
							</script>
						</center></td>
					</tr>
				</table>
			</td>
		</tr>
		
	</table>
</div>

<br />
<p class="docblurb">Documentation generated by <b>ClassyDoc</b>, using the <b>DOMIT!</b> and <b>SAXY</b> parsers.<br />
Please visit <a href="http://www.engageinteractive.com/opensource.html" target="_child">Engage Interactive</a> to download free copies.</p>
<br />
</center>
</body>
</html>
