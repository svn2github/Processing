<html>
<head><script type="text/javascript" src="functions.js"></script></head>
<link rel="stylesheet" href="docstyles.css" />
<body bgcolor="#FFE394">
<br /><br />
<center>
<div class="tutorial">
	<table class="outer" border="0" cellspacing="0" cellpadding="0" width="440" bgcolor="#000000">
		<tr>
			<td>
				<table width="100%" border="0" cellspacing="1" cellpadding="8">
					<tr>
						<td class="sectionHeader"><script type="text/javascript">
document.write(getTutorialTitle());
</script></td>
					</tr>
					<tr>
						<td class="subsectionHeader"><center>
							<script type="text/javascript">
								document.write(generateMenu(28));
							</script>
						</center></td>
					</tr>

					<tr>
						<td class="subsectionHeader">Saving and Caching a DOMIT Document</td>
					</tr>
					<tr>
						<td class="regular">
					
						<p>To save a <b>DOMIT_Document</b> as an XML text file, you can use the <span class="code">saveXML</span> method:
						</p>
						
						<p><pre class="code">
$success =&amp; $cdCollection-&gt;saveXML("/xml/cdcollection.xml");
</pre></p>

						<p><b>true</b> or <b>false</b> will be returned, depending on the success of the save operation.
						</p>
						
						<p><span class="code">saveXML</span> has a second parameter which, when set to <b>true</b>, will save the xml representation
						using <span class="code">toNormalizedString</span>:
						</p>
						
						<p><pre class="code">
$success =&amp; $cdCollection-&gt;saveXML("/xml/cdcollection.xml", true);
</pre></p>
						
						<p><b><u>saveXML_utf8</u></b></p>
						
						<p><span class="code">saveXML</span> also has a UTF-8 compliant counterpart, <span class="code">saveXML_utf8</span>, 
						which will save the xml representation in UTF-8 encoded format:
						</p>
						
						<p>As with <span class="code">loadXML_utf8</span> and <span class="code">saveXML_utf8</span>,
						there are several preconditions to using these methods:

	<ul>
		<li>Your xml must use <b>ISO-8859-1 encoding</b>. Any other encoding, including UTF-8 encoding, will likely produce corrupted text.</li>
		<li>Expat must be included in your PHP distribution, since these functions use Expat's <span class="code">UTF8_encode</span> function.</li>
	</ul>
</p>

<p><i>For these reasons, it is no longer recommended that these methods be used. Refer instead to
the <span class="code">appendEntityTranslationTable</span> method.</i></p>

<p>If you still want to use these methods, here is an example:</p>
						
						<p><pre class="code">
$success =&amp; $cdCollection-&gt;saveXML_utf8("/xml/cdcollection.xml");
</pre></p>
						
						<p><b><u>DOMIT_Cache</u></b></p>
						
						<p>An experimental class has been added that will allow you to to cache a <b>DOMIT_Document</b> for quick retrieval.<p>

						</p>Caching is performed using the <span class="code">DOMIT_Cache</span> class. An xml document passed to this class is serialized and saved as a .dch (DOMIT! Cache) file in the same directory as the .xml text file:
						</p>
						
						<p><pre class="code">
DOMIT_cache::toCache("myxmlfile.xml", $xmldoc);
</pre></p>

						</p>To reload the document from its cache, use the <span class="code">fromCache</span> method:
						</p>
						
						<p><pre class="code">
$xmldoc =&amp; DOMIT_cache::fromCache("myxmlfile.xml");
</pre></p>

						<p><i><b>Warning!</b> This class is experimental! It does not do safety checking of any sort. There is no file locking, expiry mechanism, and the class does not ensure that the cached file is not based on an old version of DOMIT!</i></p>

						<p><i>Please use at your own risk, and send any bug reports to me if you find anything wrong! A more robust caching mechanism is being worked on and may be available soon.</i></p>
						</td>
					</tr>
					<tr>
						<td class="subsectionHeader"><center>
							<script type="text/javascript">
								document.write(generateMenu(28));
							</script>
						</center></td>
					</tr>
				</table>
			</td>
		</tr>
		
	</table>
</div>


<br />
<p class="docblurb">Documentation generated by <b>ClassyDoc</b>, using the <b>DOMIT!</b> and <b>SAXY</b> parsers.<br />
Please visit <a href="http://www.engageinteractive.com/opensource.html" target="_child">Engage Interactive</a> to download free copies.</p>
<br />
</center>
</body>
</html>
